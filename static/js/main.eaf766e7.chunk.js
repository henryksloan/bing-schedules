(window.webpackJsonpschedules=window.webpackJsonpschedules||[]).push([[0],{176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(26),o=n.n(r),i=n(194);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(6),u=n(7),l=n(9),d=n(8),h=n(10),p=n(5),m=n(193),f=(n(95),n(3)),v=n.n(f);n(157),n(34);v.a.initializeApp({apiKey:"AIzaSyAtkDMcmqJXjxNRvx84gYKQqssbarfkaOs",authDomain:"bing-schedules.firebaseapp.com",databaseURL:"https://bing-schedules.firebaseio.com",projectId:"bing-schedules",storageBucket:"bing-schedules.appspot.com",messagingSenderId:"249912717870"});v.a.firestore().settings({timestampsInSnapshots:!0}),v.a.firestore().enablePersistence().catch((function(e){"failed-precondition"===e.code?console.log(e.code):"unimplemented"===e.code&&console.log(e.code)})),v.a.auth().setPersistence(v.a.auth.Auth.Persistence.LOCAL);v.a,new v.a.auth.GoogleAuthProvider;var b=v.a.auth(),g=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).login=n.login.bind(Object(p.a)(n)),n.logout=n.logout.bind(Object(p.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"logout",value:function(){var e=this;b.signOut().then((function(){e.props.logout(),localStorage.setItem("uid","")}))}},{key:"login",value:function(){var e=this,t=new v.a.auth.GoogleAuthProvider;v.a.auth().setPersistence(v.a.auth.Auth.Persistence.LOCAL).then((function(){t.setCustomParameters({prompt:"select_account"}),b.signInWithPopup(t).then((function(t){var n=t.user;e.props.login(n)}))}))}},{key:"render",value:function(){return s.a.createElement("header",{id:"top-header"},s.a.createElement(m.a,{to:"/"},s.a.createElement("img",{alt:"logo",src:"/assets/logo.png"}),s.a.createElement("h1",null,"Binghamton Schedule Manager")),s.a.createElement("div",{id:"top-header-auth-button"},s.a.createElement("p",null,this.props.user?this.props.user.displayName||this.props.user.email:""),this.props.user?s.a.createElement("button",{className:"button gray",onClick:this.logout},"Log Out"):s.a.createElement("button",{className:"button gray",onClick:this.login},"Log In")))}}]),t}(s.a.Component),y=n(29),E=n.n(y),j=n(48),k=n(196),O=n(195),S=n(83),_=n.n(S),w=(n(176),function(e){function t(e){var n;Object(c.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e));var a=!1;n.props.courses.some((function(e){return!e.days.includes("S")&&!e.days.includes("U")||(a=!0,!1)})),n.props.noWeekend&&!a?n.weekdays=["Monday","Tuesday","Wednesday","Thursday","Friday"]:n.weekdays=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],n.days_header=n.weekdays.map((function(e,t){return s.a.createElement("th",{key:t+1,className:"weekview-cell-label"},s.a.createElement("span",null,e.substr(0,3)))})),n.days_header.splice(0,0,s.a.createElement("th",{key:0,className:"weekview-cell-label"})),n.hour_min=null,n.hour_max=null,n.props.courses.forEach((function(e){var t=new Date("1/1/1970 "+e.time_start.toUpperCase().trim()).getHours();(t<n.hour_min||null==n.hour_min)&&(n.hour_min=t);var a=new Date("1/1/1970 "+e.time_end.toUpperCase().trim()).getHours();(a>n.hour_max||null==n.hour_max)&&(n.hour_max=a)}));var r=0;n.props.endHour&&n.props.endHour>n.hour_max&&(n.hour_max=n.props.endHour,r+=1),n.props.startHour&&n.props.startHour<n.hour_min&&(n.hour_min=n.props.startHour,r+=1),r>0&&(n.hour_min+=n.hour_max-n.hour_min-(n.props.endHour-n.props.startHour));for(var o=[],i=n.hour_min;i<=n.hour_max;i++){for(var u=[],h=0;h<4;h++){var m=[];0===h&&m.push(s.a.createElement("td",{key:0,rowSpan:4,className:"weekview-cell-label"},(i+11)%12+1+(i>=12?"PM":"AM")));for(var f=0;f<n.weekdays.length;f++)m.push(s.a.createElement("td",{key:n.weekdays[f],className:"weekview-cell-empty"}));u.push(m)}o.push(u)}return n.row_groups_default=o,n.state={row_groups:o},n.addBlock=n.addBlock.bind(Object(p.a)(n)),n.addBlockAtTime=n.addBlockAtTime.bind(Object(p.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.courses){this.props.courses.forEach((function(t){for(var n=0;n<t.days.length;n++)e.addBlockAtTime("MTWRFSU".indexOf(t.days.charAt(n)),t.time_start,t.time_end,s.a.createElement("span",{key:n},s.a.createElement("b",null,t.name),s.a.createElement("br",null),t.course,s.a.createElement("br",null),t.times))}))}}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({row_groups:this.row_groups_default});e.courses.forEach((function(e){for(var n=0;n<e.days.length;n++)t.addBlockAtTime("MTWRFSU".indexOf(e.days.charAt(n)),e.time_start,e.time_end,s.a.createElement("span",{key:n},s.a.createElement("b",null,e.name),s.a.createElement("br",null),e.course,s.a.createElement("br",null),e.times))}))}},{key:"addBlock",value:function(e,t,n,a,r){var o=0===n?e+1:e,i=this.state.row_groups;if(i[t]&&i[t][n]&&i[t][n][o]){var c=i[t][n][o].key;i[t][n][o]=s.a.createElement("td",{rowSpan:a,style:{backgroundColor:"#ccc",height:"100%"},key:c},s.a.createElement("span",null,s.a.createElement("div",null,r)));for(var u=1;u<a;u++){i[t+Math.floor((n+u)/4)][(n+u)%4][e+((n+u)%4===0?1:0)]=null}this.setState({row_groups:i})}}},{key:"addBlockAtTime",value:function(e,t,n,a){var s=new Date("1/1/1970 "+t.toUpperCase().trim()),r={hour:s.getHours(),quarter:Math.round(s.getMinutes()/15)},o=new Date("1/1/1970 "+n.toUpperCase().trim()),i=o.getHours(),c=Math.round(o.getMinutes()/15),u=r.hour-this.hour_min;u<0&&(u=24+u);var l=r.quarter,d=0;i>r.hour&&(d+=4*(i-r.hour-1)),d+=4-r.quarter+c,this.addBlock(e,u,l,d,a)}},{key:"render",value:function(){var e=this.state.row_groups;return s.a.createElement("table",{className:"weekview-table"},s.a.createElement("colgroup",null,s.a.createElement("col",{style:{width:"50px"}}),this.weekdays.map((function(e,t){return s.a.createElement("col",{key:t,style:{width:"100px"}})}))),s.a.createElement("thead",null,this.props.title?s.a.createElement("tr",{className:"weekview-title"},s.a.createElement("td",{colSpan:this.weekdays.length+1},this.props.title)):null,s.a.createElement("tr",null,this.days_header)),s.a.createElement("tbody",null,e.map((function(e){return e.map((function(e,t){return s.a.createElement("tr",{key:"row"+t},e)}))}))))}}]),t}(s.a.Component)),C=(n(177),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},s.a.createElement("span",{style:this.props.editButton?{lineHeight:"30px"}:null},this.props.title),this.props.editButton),s.a.createElement("div",{className:"card-content"},this.props.children))}}]),t}(s.a.Component)),x=(n(178),n(24)),A=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).changeSubject=n.changeSubject.bind(Object(p.a)(n)),n.changeCode=n.changeCode.bind(Object(p.a)(n)),n.changeSection=n.changeSection.bind(Object(p.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"changeSubject",value:function(e){var t=this;this.props.updateEntry(this.props.index,{subject:e,code:null,section:null},(function(){return t.code_select.focus()}))}},{key:"changeCode",value:function(e){var t=this;this.props.updateEntry(this.props.index,{code:e,section:null},(function(){return t.section_select.focus()}))}},{key:"changeSection",value:function(e){var t=this;this.props.updateEntry(this.props.index,{section:0===e.length?null:e},(function(){return 0===e.length?null:t.props.focusNextEntry()}))}},{key:"focusSubject",value:function(){this.subject_select.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.subject,a=t.code,r=t.section,o=this.props.getCodes(n),i=this.props.getSections(n,a);return s.a.createElement("div",null,s.a.createElement(x.c,{tabIndex:0,value:n,onChange:this.changeSubject,options:this.props.subject_options,placeholder:"Select Subject",openMenuOnFocus:!0,tabSelectsValue:!1,className:"course-select",classNamePrefix:"react-select",filterOption:Object(x.b)({matchFrom:"start"}),ref:function(t){e.subject_select=t}}),s.a.createElement(x.c,{tabIndex:0,value:a,onChange:this.changeCode,options:o,placeholder:"Select Course",openMenuOnFocus:!0,tabSelectsValue:!1,isDisabled:0===o.length,className:"course-select",classNamePrefix:"react-select",filterOption:Object(x.b)({matchFrom:"start"}),ref:function(t){e.code_select=t}}),s.a.createElement(x.c,{tabIndex:0,value:r,onChange:this.changeSection,options:i,placeholder:"Select Section",openMenuOnFocus:!0,tabSelectsValue:!1,isDisabled:0===i.length,className:"course-select",classNamePrefix:"react-select",filterOption:Object(x.b)({matchFrom:"start"}),components:{Option:function(e){return s.a.createElement("div",null,s.a.createElement(x.a.Option,e,e.children,s.a.createElement("span",{className:e.data.time.indexOf(", ")>-1?"multiple":""},e.data.time.split(", ").map((function(e,t){return[e,s.a.createElement("br",{key:t})]})))))}},isOptionDisabled:function(e){return e.already_entered},ref:function(t){e.section_select=t}}),s.a.createElement("img",{src:"/assets/cross.png",alt:"Delete entry",style:{verticalAlign:"middle",cursor:"pointer"},width:"16",height:"16",onClick:function(){e.props.removeEntry(e.props.index)}}))}}]),t}(s.a.Component),F=(n(187),new v.a.auth.GoogleAuthProvider,v.a.auth(),function(e){function t(e){var n;Object(c.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e));var a=e.data?Object.keys(e.data).reduce((function(e,t){return e.push({value:t,label:t}),e}),[]):[],s=[{subject:null,code:null,section:null},{subject:null,code:null,section:null}];return e.initial&&(s=e.initial.reduce((function(e,t){return e.push({subject:{value:t.content.subject,label:t.content.subject},code:{value:t.content.code,label:t.content.code},section:{value:t.content.section,label:t.content.section}}),e}),[])),n.state={subject_options:a,entries:s,selector_refs:[],loading:!1},n.getCodes=n.getCodes.bind(Object(p.a)(n)),n.getSections=n.getSections.bind(Object(p.a)(n)),n.updateEntry=n.updateEntry.bind(Object(p.a)(n)),n.getActivities=n.getActivities.bind(Object(p.a)(n)),n.addEntry=n.addEntry.bind(Object(p.a)(n)),n.addFilledEntry=n.addFilledEntry.bind(Object(p.a)(n)),n.removeEntry=n.removeEntry.bind(Object(p.a)(n)),n.onSubmit=n.onSubmit.bind(Object(p.a)(n)),n.focusNextEntry=n.focusNextEntry.bind(Object(p.a)(n)),n.shouldFindActivities=n.shouldFindActivities.bind(Object(p.a)(n)),n.renderActivityButtons=n.renderActivityButtons.bind(Object(p.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"getCodes",value:function(e){return e&&e.value?Object.keys(this.props.data[e.value]).reduce((function(e,t){return e.push({value:t,label:t}),e}),[]):[]}},{key:"getSections",value:function(e,t){var n=this;if(e&&t&&e.value&&t.value){var a=Object.keys(this.props.data[e.value][t.value]).reduce((function(a,s){var r=!1;for(var o in n.state.entries)if(n.state.entries[o].subject&&n.state.entries[o].code&&n.state.entries[o].section&&n.state.entries[o].subject.value===e.value&&n.state.entries[o].code.value===t.value&&n.state.entries[o].section.value===s){r=!0;break}var i=n.props.data[e.value][t.value][s].type[0];return a[i]||(a[i]=[]),a[i].push({value:s,label:s,time:n.props.getTime(e.value,t.value,s),already_entered:r}),a}),{});return Object.entries(a).reduce((function(e,t){return e.push({label:t[0],options:t[1]}),e}),[])}return[]}},{key:"updateEntry",value:function(e,t,n){var a=this.state.entries;null!==a[e]&&null!==t&&(a[e]=Object.assign(a[e],t),this.setState({entries:a},n))}},{key:"getActivities",value:function(e,t,n){var a=this;return e&&t&&n&&e.value&&t.value&&n.value?Object.keys(this.props.data[e.value][t.value]).filter((function(n){var s=a.props.data[e.value][t.value][n];return"Activity"===s.type[0]||"Discussion"===s.type[0]})):[]}},{key:"addEntry",value:function(){var e=this.state.entries;e.push({subject:null,code:null,section:null}),this.setState({entries:e})}},{key:"addFilledEntry",value:function(e,t,n,a){var s=this.state.entries;s.splice(a,0,{subject:e,code:t,section:n}),this.setState({entries:s})}},{key:"removeEntry",value:function(e){var t=this,n=this.state.entries;n.splice(e,1),this.setState({entries:n},(function(){0===t.state.entries.length&&t.addEntry()}))}},{key:"componentDidMount",value:function(){this._ismounted=!0}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"onSubmit",value:function(){for(var e=this,t=[],n=0;n<this.state.entries.length;n++)null!=this.state.entries[n].subject||null!=this.state.entries[n].code||null!=this.state.entries[n].section?null!=this.state.entries[n].subject&&null!=this.state.entries[n].code&&null!=this.state.entries[n].section?t.push(this.state.entries[n]):console.log("Please enter all fields or remove the row to continue"):console.log("All null");if(0!==t.length){var a=t.map((function(e){return{type:"course",content:{subject:e.subject.value,code:e.code.value,section:e.section.value}}}));this.setState({loading:!0}),v.a.firestore().collection("schedules").doc(this.props.user.uid).set({schedule:a}).then((function(){e.props.onSubmit(),e._ismounted&&e.setState({loading:!1})})).catch((function(t){console.log("Error getting document --",t),e.setState({loading:!1})}));var s=v.a.firestore().collection("groups");[s.where("roles."+this.props.user.uid,"==","owner"),s.where("roles."+this.props.user.uid,"==","viewer"),s.where("roles."+this.props.user.uid,"==","member")].forEach((function(t){t.get().then((function(t){t.forEach((function(t){t.ref.collection("schedules").doc(e.props.user.uid).get().then((function(n){n.exists&&t.ref.collection("schedules").doc(e.props.user.uid).set({schedule:a})}))}),e)}))}),this)}else console.log("Please enter a course")}},{key:"focusNextEntry",value:function(e){this.selector_refs.length<=e+1?(this.addEntry(),this.to_focus=e+1):this.selector_refs[e+1].focusSubject()}},{key:"shouldFindActivities",value:function(e){for(var t=0;t<this.state.entries.length;t++)if(this.state.entries[t].subject&&this.state.entries[t].code&&this.state.entries[e].subject&&this.state.entries[e].code){var n=this.state.entries[e];if(n.subject&&n.code&&n.section){var a=this.props.data[n.subject.value][n.code.value][n.section.value];if("Discussion"===a.type[0]||"Activity"===a.type[0])return!1}if(t!==e&&this.state.entries[t].subject.value===n.subject.value&&this.state.entries[t].code.value===n.code.value)return!1}return!0}},{key:"renderActivityButtons",value:function(e){var t=this;if(this.shouldFindActivities(e)){var n=this.state.entries[e];if(n){var a=this.getActivities(n.subject,n.code,n.section).reduce((function(a,r,o){return a.push(s.a.createElement("button",{key:o,className:"button gray",onClick:function(){t.addFilledEntry(n.subject,n.code,{value:r,label:r},e+1),t.to_focus=e+2}},r," | ",t.props.getTime(n.subject.value,n.code.value,r))),a}),[]);return a.length>0?s.a.createElement("div",{className:"add-activities"},"Add activities: ",a):void 0}}}},{key:"render",value:function(){var e=this;this.selector_refs=[];var t=this.state.entries.map((function(t,n){return s.a.createElement("div",{key:n},s.a.createElement(A,{index:n,subject:t.subject,code:t.code,section:t.section,subject_options:e.state.subject_options,getCodes:e.getCodes,getSections:e.getSections,updateEntry:e.updateEntry,removeEntry:e.removeEntry,focusNextEntry:function(){e.focusNextEntry(n)},ref:function(t){e.selector_refs[n]=t,e.to_focus===n&&(t.focusSubject(),e.to_focus=null)}}),e.renderActivityButtons(n))}));return s.a.createElement("div",{className:"course-container"},t,s.a.createElement("div",{id:"course-container-buttons"},s.a.createElement("button",{className:"button gray large",onClick:this.addEntry},"Add another course"),s.a.createElement("button",{className:"button gray large",onClick:this.onSubmit},"Submit"),s.a.createElement("img",{src:"/assets/loading.gif",style:{display:this.state.loading?"inline":"none"},alt:"Loading..."})))}}]),t}(s.a.Component)),N=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.props.edit_schedule||!this.props.schedule?s.a.createElement(F,{data:this.props.data,user:this.props.user,initial:this.props.schedule,getTime:function(t,n,a){var s=e.props.getField(t,n,a,"time");return console.log(s),e.props.getField(t,n,a,"days").map((function(e,t){return e+" "+s[t]||s[0]})).join(", ")},onSubmit:this.props.onSubmit}):s.a.createElement(w,{noWeekend:this.props.noWeekend,courses:this.props.courses,startHour:9,endHour:18}))}}]),t}(s.a.Component),M=(new v.a.auth.GoogleAuthProvider,v.a.auth()),P=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={groupId:"",user:null,group:{},schedules:[],role:null,exists:!0,edit_schedule:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.onAuthStateChanged((function(t){if(t){console.log(t);var n=_.a.parse(e.props.location.search).groupId;if(!n)return;e.setState({groupId:n}),v.a.firestore().collection("groups").doc(n).get().then((function(a){if(e.setState({exists:a.exists}),a.exists){var s=a.data().roles;null==s[t.uid]&&(s[t.uid]="member",v.a.firestore().collection("groups").doc(n).update({roles:s})),e.setState({role:s[e.props.user.uid]}),"member"!==s[t.uid]||a.data().settings.members_can_view?v.a.firestore().collection("groups").doc(n).collection("schedules").get().then((function(t){var n=[];t.forEach((function(t){v.a.firestore().collection("usernames").doc(t.id).get().then((function(a){n[t.id]=[a.data().username,t.data().schedule],e.setState({schedules:n})}))}))})).catch((function(e){console.log("Error getting document --",e)})):v.a.firestore().collection("groups").doc(n).collection("schedules").doc(t.uid).get().then((function(t){e.setState({schedules:{"My Schedule":t.data().schedule}})})).catch((function(e){console.log("Error getting document --",e)}))}})).catch((function(e){console.log("Error getting document --",e)}))}else e.setState({groupId:"",user:null,group:{},schedules:[],role:null})}))}},{key:"render",value:function(){var e=this;if(null==this.state.groupId||!this.state.exists)return s.a.createElement("div",{id:"group-page-container"},s.a.createElement("h2",null,"Group not found"));if(!this.props.user)return s.a.createElement("div",{id:"group-page-container"},s.a.createElement("h2",null,"Please login to view this group"));var t=[],n=null;this.state.schedules&&Object.keys(this.state.schedules).forEach((function(a){var s=[];e.state.schedules[a][1].forEach((function(t){var n,a=t.content,r=e.props.getField(a.subject,a.code,a.section,"time"),o=e.props.getField(a.subject,a.code,a.section,"days"),i=e.props.getField(a.subject,a.code,a.section,"course"),c=[];if(r.constructor===Array)for(n=0;n<r.length;n++)c=r[n].split("-"),s.push({days:o[n],time_start:c[0].trim(),time_end:c[1].trim(),name:i[n],times:r[n],course:a.subject+" "+a.code+"-"+a.section})}),e),a===e.props.user.uid?n=s:t.push([e.state.schedules[a][0],s])}),this);for(var a=[],r=0;r<t.length;r+=2)a.push(s.a.createElement("tr",{key:r},s.a.createElement("td",null,s.a.createElement("div",null,s.a.createElement(w,{title:t[r][0],courses:t[r][1],noWeekend:!0}))),s.a.createElement("td",null,t[r+1]?s.a.createElement("div",null,s.a.createElement(w,{title:t[r+1][0],courses:t[r+1][1],noWeekend:!0})):null)));return s.a.createElement("div",{id:"group-page-container"},s.a.createElement("div",{id:"group-my-schedule-card"},s.a.createElement(C,{title:"My Schedule",editButton:s.a.createElement("button",{style:{float:"right"},className:"button gray",onClick:function(){e.setState({edit_schedule:!e.state.edit_schedule})}},this.state.edit_schedule?"Cancel":"Edit schedule")},this.props.user&&this.state.schedules[this.props.user.uid]?s.a.createElement("span",null,s.a.createElement(N,{noWeekend:!0,data:this.props.data,user:this.props.user,schedule:this.state.schedules[this.props.user.uid][1],edit_schedule:this.state.edit_schedule,courses:n,onSubmit:function(){e.setState({edit_schedule:!1})},getField:this.props.getField,getTime:function(t,n,a){return e.props.getField(t,n,a,"time").join(", ")}})):null)),s.a.createElement("div",{id:"group-schedules"},t.map((function(e,t){return s.a.createElement(C,{key:t,title:e[0]},s.a.createElement(w,{courses:e[1],noWeekend:!0}))}))))}}]),t}(s.a.Component),B=n(87),T=(n(188),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={title:"",groups:{},schedule:null,edit_schedule:!1},n.onChangeTitle=n.onChangeTitle.bind(Object(p.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.a.auth().onAuthStateChanged(function(){var t=Object(j.a)(E.a.mark((function t(n){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n&&(a=v.a.firestore().collection("groups"),[a.where("roles."+n.uid,"==","owner"),a.where("roles."+n.uid,"==","viewer"),a.where("roles."+n.uid,"==","member")].forEach((function(t){t.get().then((function(t){t.forEach((function(t){var n=e.state.groups;n[t.id]=t.data(),e.setState({groups:n})}))}))})),v.a.firestore().collection("schedules").doc(n.uid).onSnapshot((function(t){t.data()&&e.setState({schedule:t.data().schedule})})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"createGroup",value:function(e){e&&""!==e&&this.props.user&&v.a.firestore().collection("groups").doc().set({title:e,roles:Object(B.a)({},this.props.user.uid,"owner"),settings:{members_can_view:!0}})}},{key:"onChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"render",value:function(){var e=this;if(!this.props.user)return s.a.createElement("div",null,s.a.createElement("p",null,"Please log in to create or view schedule groups"));var t=Object.keys(this.state.groups).map((function(t,n){return s.a.createElement("li",{key:n},s.a.createElement(m.a,{to:"/group/?groupId="+t},e.state.groups[t].title))})),n=[];return this.state.schedule&&this.state.schedule.forEach((function(t){var a,s=t.content,r=e.props.getField(s.subject,s.code,s.section,"time"),o=e.props.getField(s.subject,s.code,s.section,"days"),i=e.props.getField(s.subject,s.code,s.section,"course"),c=[];if(r.constructor===Array)for(a=0;a<r.length;a++)c=r[a].split("-"),n.push({days:o[a],time_start:c[0].trim(),time_end:c[1].trim(),name:i[a],times:r[a],course:s.subject+" "+s.code+"-"+s.section})}),this),s.a.createElement("div",{id:"landing-container"},s.a.createElement("div",{id:"create-group-card"},s.a.createElement(C,{title:"Create a Group"},s.a.createElement("label",{id:"name-label"},s.a.createElement("p",null,"Name"),s.a.createElement("input",{type:"text",onChange:this.onChangeTitle,placeholder:"Enter a group name",value:this.state.title})),s.a.createElement("br",null),s.a.createElement("label",{id:"checkbox-label"},s.a.createElement("p",null,"Members can view all schedules"),s.a.createElement("input",{type:"checkbox",onChange:function(){return 0},value:!1})),s.a.createElement("button",{id:"create-group-button",className:"button green large",onClick:function(){e.createGroup(e.state.title)}},"Create Group"))),s.a.createElement("div",{id:"my-groups-card"},s.a.createElement(C,{title:"My Groups"},s.a.createElement("ul",null,t))),s.a.createElement("div",{id:"my-schedules-card"},s.a.createElement(C,{title:"My Schedule",editButton:s.a.createElement("button",{style:{float:"right"},className:"button gray",onClick:function(){e.setState({edit_schedule:!e.state.edit_schedule})}},this.state.edit_schedule?"Cancel":"Edit schedule")},s.a.createElement(N,{noWeekend:!0,data:this.props.data,user:this.props.user,schedule:this.state.schedule,edit_schedule:this.state.edit_schedule,courses:n,getField:this.props.getField,onSubmit:function(){e.setState({edit_schedule:!1})}}))))}}]),t}(s.a.Component)),D=(new v.a.auth.GoogleAuthProvider,v.a.auth()),I=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={data:null},D.onAuthStateChanged(function(){var e=Object(j.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&v.a.firestore().collection("usernames").doc(t.uid).get().then((function(e){null==e.data()&&v.a.firestore().collection("usernames").doc(t.uid).set({username:t.displayName})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.getField=n.getField.bind(Object(p.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;n.e(3).then(n.t.bind(null,197,3)).then((function(t){e.setState({data:t.default||t})}))}},{key:"getField",value:function(e,t,n,a){var s,r,o=(s=[e,t,n],r=this.state.data,s.reduce((function(e,t){return e&&e[t]?e[t]:null}),r));if(console.log(e,t,n,o),o){if(o[a].constructor===Array)return o[a];var i=[];return i.push(o[a]),i}return""}},{key:"render",value:function(){var e=this;return s.a.createElement(k.a,null,s.a.createElement(O.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(T,Object.assign({},t,{user:e.props.user,data:e.state.data,getField:e.getField}))}}),s.a.createElement(O.a,{path:"/group",render:function(t){return s.a.createElement(P,Object.assign({},t,{user:e.props.user,data:e.state.data,getField:e.getField}))}}))}}]),t}(s.a.Component),W=(new v.a.auth.GoogleAuthProvider,v.a.auth()),H=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={user:null},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;W.onAuthStateChanged((function(t){t?(e.setState({user:t}),localStorage.setItem("uid",t.uid)):e.setState({user:null})}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"app"},s.a.createElement(g,{user:this.state.user,login:function(t){e.setState({user:t})},logout:function(){e.setState({user:null})}}),s.a.createElement(I,{user:this.state.user}))}}]),t}(s.a.Component);n(190),n(191);o.a.render(s.a.createElement(i.a,{basename:""},s.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,n){e.exports=n(192)},95:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.eaf766e7.chunk.js.map